<div class="card">
  <div class="card-divider">
    <h2 class="card-title"><%= form_title %></h2>
    <div class="button--title">
      <%= link_to t(".skip_template"), decidim_admin_templates.skip_questionnaire_templates_path(questionnaire_id: questionnaire, url: request.url), class: "button tiny button--simple", method: :post %>
    </div>
  </div>

  <div class="card-section">
    <div class="row column">
      <%= t(".description") %>
    </div>

    <%= decidim_form_for([questionnaire], url: decidim_admin_templates.choose_questionnaire_templates_url, method: :post, html: { class: "form choose_questionnaire_templates" }) do |form| %>
      <div class="row column">
        <% prompt_options = {
          url: decidim_admin_templates.questionnaire_templates_url(format: :json),
          change_url: decidim_admin_templates.preview_questionnaire_templates_url(format: :js),
          placeholder: t(".choose_template")
        } %>
        <% default_options = templates.last(5).map { |questionnaire_template| { value: questionnaire_template.id, label: translated_attribute(questionnaire_template.name) } } %>
        
        <%= form.autocomplete_select(:questionnaire_template_id, false, { multiple: false, label: t(".choose_template"), default_options: default_options }, prompt_options) %>
      </div>

      <div class="row column choose-template-preview">
      </div>

      <div class="button--double form-general-submit">
        <%= form.submit t(".create_from_template"), class: "button" %>
      </div>
    <% end %>
  </div>
</div>

<%= stylesheet_link_tag "decidim/templates/templates", media: "all" %>